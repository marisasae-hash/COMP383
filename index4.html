<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>AR Bunny Interaction</title>
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    </head>
    <body style="margin: 0; overflow:hidden;">
        <div id="click-to-start" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999; background: rgba(0,0,0,0.5); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer;">
            <h2>คลิกหน้าจอเพื่อเริ่มเล่น AR</h2>
        </div>

        <a-scene
            vr-mode-ui="enabled: false"
            arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
        >
            <a-assets>
                <a-asset-item id="bunnyModel" src="scene.gltf"></a-asset-item>
                <audio id="mySound" src="song.mp3" preload="auto"></audio>
            </a-assets>

            <a-entity
                id="target"
                gltf-model="#bunnyModel"
                scale="0.3 0.3 0.3" 
                position="0 0.5 -1.5" 
                rotation="0 0 0"
                sound="src: #mySound; loop: true"
                animation="property: position; to: 0 0.8 -1.5; dur: 1000; easing: easeInOutQuad; dir: alternate; loop: true">
            </a-entity>

            <a-camera rotation-reader>
                <a-entity cursor="rayOrigin: mouse"></a-entity>
            </a-camera>
        </a-scene>

        <script>
            // ฟังก์ชันแก้ปัญหาเรื่องเสียงไม่เล่นอัตโนมัติ
            const startOverlay = document.getElementById('click-to-start');
            const sceneModel = document.getElementById('target');
            
            startOverlay.addEventListener('click', function() {
                // เล่นเสียง
                sceneModel.components.sound.playSound();
                // ซ่อนปุ่ม Overlay
                startOverlay.style.display = 'none';
            });
        </script>
    </body>
</html>